---
title: Masking
---
import { Callout } from "nextra/components";

# Masking

Masking allows you to automatically redact or transform sensitive data in your traces before they're sent to the observatory. Masking is essential for several reasons:

- **Security**: Prevent exposure of credentials or sensitive business data
- **Regulatory Compliance**: Meet requirements like GDPR, HIPAA, or CCPA

## Configure Masking

To implement masking, you need to define a masking function and configure the trace manager to use it.

```python
from deepeval.tracing import trace_manager, observe
import re

def masking_function(data):
    if isinstance(data, str):
        data = re.sub(r'\b(?:\d{4}[- ]?){3}\d{4}\b', '[REDACTED CARD]', data)
        return data
    return data

trace_manager.configure(mask=masking_function)

# LLM App
@observe(type="agent")
def agent(query: str):
    return "374245455400126"

my_agent("Test Masking")
```

The masking function is automatically applied to:

1. **Span attributes**: Any attributes passed to span decorators or wrappers
2. **Observed function I/O**: all input parameters and return values of functions with `@observe` decorator.

<Callout type="info">
    Since the masking function is applied to an observed function's inputs, outputs, and span attributes, it must handle the various data types defined for each field as necessary.
</Callout>

