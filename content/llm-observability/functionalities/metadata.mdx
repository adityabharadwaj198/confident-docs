---
title: Metadata
---

# Metadata

With Confident AI, you can attach additional metadata to both traces and spans. This information can be used for filtering, grouping, and analyzing your traces in the observatory.

## Add Metadata

Use `update_current_span` and `update_current_trace` to add span-level and trace-level metadata, respectively. Each metadata argument is a dictionary whose keys are strings and whose values are any JSON-serializable type.

```python
from deepeval.tracing import update_current_span, update_current_trace, observe

@observe(type="agent")
async def my_agent(query: str):
    
    # Add span-level metadata
    update_current_span(
        metadata={
            "source": "knowledge_base_1",
            "confidence_score": 0.92,
            "retrieved_documents": 3
        }
    )
    
    # Add trace-level metadata
    update_current_trace(
        metadata={
            "user_id": "user-456",
            "session_id": "session-123",
            "app_version": "1.2.3",
        }
    )

    return "Agent Response"

my_agent("Test Metadata")
```
